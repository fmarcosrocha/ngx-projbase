<h1>Data Table</h1>
<p>A Data Table (Tabela) é um conjunto de dados organizados em linhas e colunas. Pode permitir a interação do usuário, a
  fim de personalizar os dados exibidos.</p>

<mat-tab-group mat-align-tabs="start">
  <mat-tab label="Preview">
    <div class="p-3">
      <div class="table-search d-flex align-center mb-3">
        <ng-container *ngIf="filtroCtrl.exibirPesquisa">
          <mat-form-field appearance="outline" class="w-100" floatLabel="never">
            <input matInput placeholder="Buscar na tabela" (keyup)="filtroCtrl.filtrar($event.target)">
            <mat-icon matSuffix>search</mat-icon>
          </mat-form-field>
        </ng-container>
        <ng-container *ngIf="!filtroCtrl.exibirPesquisa">
          <h1 class="mb-0 w-100 font-weight-700">Título da tabela</h1>
        </ng-container>
        <div style="width: 15px"></div>
        <button mat-icon-button class="primary" aria-label="Informação" (click)="filtroCtrl.exibir()">
          <mat-icon *ngIf="!filtroCtrl.exibirPesquisa" class="primary">search</mat-icon>
          <mat-icon *ngIf="filtroCtrl.exibirPesquisa" class="primary">close</mat-icon>
        </button>
      </div>
      
      <div class="table-sort">
        <div class="d-flex">
          <div class="w-100">
            <mat-label>Ordenar por</mat-label>
            <mat-form-field appearance="outline" class="w-100 mat-form-field-label-out" floatLabel="never" color="accent">
              <mat-select name="valor" [(ngModel)]="ordenacaoCtrl.ordenacao" (matSortChange)="ordenacaoCtrl.ordenar()">
                <mat-option value="cpf">CPF</mat-option>
                <mat-option value="nome">Nome</mat-option>
                <mat-option value="genitora">Genitora</mat-option>
                <mat-option value="dataNascimento">Data de nascimento</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <ng-container *ngIf="ordenacaoCtrl.ordenacao">
            <div style="width: 15px"></div>
  
            <button mat-icon-button class="primary" aria-label="Ordenação" (click)="ordenacaoCtrl.mudar()">
              <mat-icon class="primary">{{ ordenacaoCtrl.direcao === 'asc' ? 'arrow_upward' : 'arrow_downward' }}</mat-icon>
            </button>
          </ng-container>
        </div>
        
      </div>

      <mat-table [dataSource]="dataSource" matSort class="w-100">
        <ng-container matColumnDef="_select">
          <mat-header-cell *matHeaderCellDef>
            <mat-checkbox (change)="$event ? selecaoCtrl.selecionarTodos() : null"
                          [checked]="selecaoCtrl.itens.hasValue() && selecaoCtrl.verificaTodosSelecionados()"
                          [indeterminate]="selecaoCtrl.itens.hasValue() && !selecaoCtrl.verificaTodosSelecionados()">
            </mat-checkbox>
          </mat-header-cell>
          <mat-cell *matCellDef="let row">
            <mat-checkbox (click)="$event.stopPropagation()"
                          (change)="$event ? selecaoCtrl.itens.toggle(row) : null"
                          [checked]="selecaoCtrl.itens.isSelected(row)">
            </mat-checkbox>
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="cpf">
          <mat-header-cell *matHeaderCellDef mat-sort-header>CPF</mat-header-cell>
          <mat-cell *matCellDef="let element" data-label="CPF"> {{element.cpf}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="nome">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Nome</mat-header-cell>
          <mat-cell *matCellDef="let element" data-label="Nome"> {{element.nome}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="genitora">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Genitora</mat-header-cell>
          <mat-cell *matCellDef="let element" data-label="Genitora"> {{element.genitora}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="dataNascimento">
          <mat-header-cell *matHeaderCellDef mat-sort-header>Data de nascimento</mat-header-cell>
          <mat-cell *matCellDef="let element" data-label="Data de nascimento"> {{element.dataNascimento}} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="_action">
          <mat-header-cell *matHeaderCellDef>Ações</mat-header-cell>
          <mat-cell *matCellDef="let element">
            <button mat-button mat-icon-button class="primary" matTooltip="Pesquisar">
              <mat-icon class="mat-primary">search</mat-icon>
            </button>
            <button mat-button mat-icon-button class="primary" matTooltip="Editar">
              <mat-icon class="mat-primary">edit</mat-icon>
            </button>
            <button mat-button mat-icon-button class="primary" matTooltip="Deletar">
              <mat-icon class="mat-primary">delete_outline</mat-icon>
            </button>
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="colunas"></mat-header-row>
        <mat-row *matRowDef="let row; columns: colunas;"></mat-row>
      </mat-table>

      <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
    </div>
  </mat-tab>
  <mat-tab label="Html">
<code>
<pre>
&lt;mat-table [dataSource]="dataSource" matSort class="w-100"&gt;
  &lt;ng-container matColumnDef="_select"&gt;
    &lt;mat-header-cell *matHeaderCellDef&gt;
      &lt;mat-checkbox (change)="$event ? selecaoCtrl.selecionarTodos() : null"
                    [checked]="selecaoCtrl.itens.hasValue() && selecaoCtrl.verificaTodosSelecionados()"
                    [indeterminate]="selecaoCtrl.itens.hasValue() && !selecaoCtrl.verificaTodosSelecionados()"&gt;
      &lt;/mat-checkbox&gt;
    &lt;/mat-header-cell&gt;
    &lt;mat-cell *matCellDef="let row"&gt;
      &lt;mat-checkbox (click)="$event.stopPropagation()"
                    (change)="$event ? selecaoCtrl.itens.toggle(row) : null"
                    [checked]="selecaoCtrl.itens.isSelected(row)"&gt;
      &lt;/mat-checkbox&gt;
    &lt;/mat-cell&gt;
  &lt;/ng-container&gt;
  
  &lt;ng-container matColumnDef="cpf"&gt;
    &lt;mat-header-cell *matHeaderCellDef mat-sort-header&gt;CPF&lt;/mat-header-cell&gt;
    &lt;mat-cell *matCellDef="let element" data-label="CPF"&gt; {{'{{'}}element.cpf{{'}}'}} &lt;/mat-cell&gt;
  &lt;/ng-container&gt;
  
  &lt;ng-container matColumnDef="nome"&gt;
    &lt;mat-header-cell *matHeaderCellDef mat-sort-header&gt;Nome&lt;/mat-header-cell&gt;
    &lt;mat-cell *matCellDef="let element" data-label="Nome"&gt; {{'{{'}}element.nome{{'}}'}} &lt;/mat-cell&gt;
  &lt;/ng-container&gt;
  
  &lt;ng-container matColumnDef="genitora"&gt;
    &lt;mat-header-cell *matHeaderCellDef mat-sort-header&gt;Genitora&lt;/mat-header-cell&gt;
    &lt;mat-cell *matCellDef="let element" data-label="Genitora"&gt; {{'{{'}}element.genitora{{'}}'}} &lt;/mat-cell&gt;
  &lt;/ng-container&gt;
  
  &lt;ng-container matColumnDef="dataNascimento"&gt;
    &lt;mat-header-cell *matHeaderCellDef mat-sort-header&gt;Data de nascimento&lt;/mat-header-cell&gt;
    &lt;mat-cell *matCellDef="let element" data-label="Data de nascimento"&gt; {{'{{'}}element.dataNascimento{{'}}'}} &lt;/mat-cell&gt;
  &lt;/ng-container&gt;
  
  &lt;ng-container matColumnDef="_action"&gt;
    &lt;mat-header-cell *matHeaderCellDef&gt;Ações&lt;/mat-header-cell&gt;
    &lt;mat-cell *matCellDef="let element"&gt;
      &lt;button mat-button mat-icon-button class="primary" matTooltip="Pesquisar"&gt;
        &lt;mat-icon class="mat-primary"&gt;search&lt;/mat-icon&gt;
      &lt;/button&gt;
      &lt;button mat-button mat-icon-button class="primary" matTooltip="Editar"&gt;
        &lt;mat-icon class="mat-primary"&gt;edit&lt;/mat-icon&gt;
      &lt;/button&gt;
      &lt;button mat-button mat-icon-button class="primary" matTooltip="Deletar"&gt;
        &lt;mat-icon class="mat-primary"&gt;delete_outline&lt;/mat-icon&gt;
      &lt;/button&gt;
    &lt;/mat-cell&gt;
  &lt;/ng-container&gt;
  
  &lt;mat-header-row *matHeaderRowDef="colunas"&gt;&lt;/mat-header-row&gt;
  &lt;mat-row *matRowDef="let row; columns: colunas;"&gt;&lt;/mat-row&gt;
&lt;/mat-table&gt;
  
  &lt;mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons&gt;&lt;/mat-paginator&gt;
</pre>
</code>
  </mat-tab>
  <mat-tab label="TS">
<code>
<pre>
export interface UsuarioDTO {{'{'}}
  cpf: string;
  nome: string;
  genitora: string;
  dataNascimento: string;
{{'}'}}

const ELEMENT_DATA: UsuarioDTO[] = [
  {{'{'}} cpf: '111.623.470-79', nome: 'Mour', genitora: 'Noawen', dataNascimento: '14/05/1985' {{'}'}},
  {{'{'}} cpf: '700.584.370-37', nome: 'Deuisna', genitora: 'Kyuhe', dataNascimento: '25/05/1988' {{'}'}},
  {{'{'}} cpf: '129.358.450-99', nome: 'Neoro', genitora: 'Lauda', dataNascimento: '14/05/1990' {{'}'}},
  {{'{'}} cpf: '791.540.700-74', nome: 'Kaema ', genitora: 'Viuhi', dataNascimento: '13/05/1975' {{'}'}},
  {{'{'}} cpf: '999.263.750-43', nome: 'Cehel', genitora: 'Dusea', dataNascimento: '10/05/1980' {{'}'}},
  {{'{'}} cpf: '765.011.400-72', nome: 'Muluohe', genitora: 'Ceol', dataNascimento: '08/05/1980' {{'}'}},
  {{'{'}} cpf: '789.193.880-67', nome: 'Clual', genitora: 'Xaepoal', dataNascimento: '11/05/1975' {{'}'}},
  {{'{'}} cpf: '269.985.110-86', nome: 'Zuaer', genitora: 'Xifaunai', dataNascimento: '28/05/1966' {{'}'}},
  {{'{'}} cpf: '611.396.270-90', nome: 'Irmopor', genitora: 'Leyelfun', dataNascimento: '14/05/1974' {{'}'}},
  {{'{'}} cpf: '344.711.500-90', nome: 'Puass', genitora: 'Feozus', dataNascimento: '26/05/1994' {{'}'}},
  {{'{'}} cpf: '288.741.380-59', nome: 'Hiobe', genitora: 'Cyewo', dataNascimento: '07/05/1995' {{'}'}},
  {{'{'}} cpf: '698.212.870-93', nome: 'Baceurin', genitora: 'Funul', dataNascimento: '06/05/1988' {{'}'}},
  {{'{'}} cpf: '461.031.080-55', nome: 'Luywi', genitora: 'Dunol', dataNascimento: '01/05/1987' {{'}'}}
];

@Component({{'{'}}
  selector: 'app-data-table',
  templateUrl: './data-table.component.html'
{{'}'}})

export class DatatableComponent implements AfterViewInit {{'{'}}
  constructor() {{'{'}} {{'}'}}

  ngAfterViewInit(): void {{'{'}}
    this.paginator._intl.itemsPerPageLabel = "Exibir";
    this.paginator._intl.nextPageLabel = "Próxima página";
    this.paginator._intl.lastPageLabel = "Última página";
    this.paginator._intl.previousPageLabel = "Página anterior";
    this.paginator._intl.firstPageLabel = "Primeira página";

    this.dataSource.paginator = this.paginator;
    this.dataSource.sort = this.sort;
  {{'}'}}

  @ViewChild(MatPaginator) paginator!: MatPaginator;
  @ViewChild(MatSort) sort!: MatSort;

  colunas: string[] = ['_select', 'cpf', 'nome', 'genitora', 'dataNascimento', '_action'];
  dataSource = new MatTableDataSource&lt;UsuarioDTO&gt;(ELEMENT_DATA);

  public filtroCtrl = {{'{'}}
    exibirPesquisa: false,
    exibir: () => {{'{'}}
      this.filtroCtrl.exibirPesquisa = !this.filtroCtrl.exibirPesquisa;

      if (!this.filtroCtrl.exibirPesquisa) {{'{'}}
        this.dataSource.filter = '';
      {{'}'}}
    {{'}'}},
    filtrar: (target: any) => {{'{'}}
      this.dataSource.filter = target!.value;
    {{'}'}}
  {{'}'}}

  public ordenacaoCtrl = {{'{'}}
    direcao: 'asc',
    mudar: () => {{'{'}}
      this.ordenacaoCtrl.direcao = this.ordenacaoCtrl.direcao === 'asc' ? 'desc' : 'asc';
      this.ordenacaoCtrl.ordenar();
    {{'}'}},
    ordenacao: '',
    ordenar: () => {{'{'}}
      this.sort.sort(({{'{'}} id: this.ordenacaoCtrl.ordenacao, start: this.ordenacaoCtrl.direcao {{'}'}}) as MatSortable);
      this.dataSource.sort = this.sort;
    {{'}'}}
  {{'}'}}

  public selecaoCtrl = {{'{'}}
    itens: new SelectionModel&lt;UsuarioDTO&gt;(true, []),
    selecionarTodos: () => {{'{'}}
      this.selecaoCtrl.verificaTodosSelecionados() ?
        this.selecaoCtrl.itens.clear() :
        this.dataSource.data.forEach(row => this.selecaoCtrl.itens.select(row));
    {{'}'}},
    verificaTodosSelecionados: () => {{'{'}}
      const numSelected = this.selecaoCtrl.itens.selected.length;
      const numRows = this.dataSource.data.length;

      return numSelected === numRows;
    {{'}'}}
  {{'}'}}
{{'}'}}
</pre>
</code>
  </mat-tab>
</mat-tab-group>